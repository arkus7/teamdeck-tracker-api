# Teamdeck GraphQL API

GraphQL wrapper over the [Teamdeck REST API](https://teamdeck.io/developers/api) created for needs of creating custom integrations with the [Teamdeck](https://teamdeck.io) product.

## Running the app

### Prerequisites

- Rust (nightly) installed
- Cargo installed

### Environmental variables

This project uses [`dotenv`](https://crates.io/crates/dotenv) to load the environmental variables.

In order to run the app, you need to have set these environmental variables:

- `TEAMDECK_API_KEY` - API key for interacting with Teamdeck API. Can be generated by the owner of organization in Teamdeck integrations settings 
- `GOOGLE_OAUTH2_CLIENT_ID` - Google OAuth2 client ID used for Google authorization
- `GOOGLE_OAUTH2_CLIENT_SECRET` - Google OAuth2 client secret used for Google authorization
- `GOOGLE_OAUTH2_REDIRECT_URI` - URI to which the user will be redirected after successful authorization
- `JWT_ACCESS_TOKEN_SECRET` - secret for creating access tokens
- `JWT_REFRESH_TOKEN_SECRET` - secret for creating refresh tokens

#### Optional ENVs
- `PORT`- port on which the app should listen for requests (default: `8000`)

### Run the application

Run locally:

``` sh
cargo run
```

Build and run via compiled binary:

``` sh
cargo build --release 
./target/release/teamdeck_tracker_api
```

## ðŸš§ Roadmap

### Teamdeck API client
 - [x] Fetching projects
 - [x] Fetching resources/users
   - [x] Fetch user by email (for authorization purposes)
   - [x] Fetch user by ID
 - [x] Fetching time entries
 - [x] Fetching time entry tags
 - [x] Create time entry
 - [ ] Update time entry
 - [ ] Update time entry tags
 - [x] Handling pagination
 - [x] Option to fetch all items at once (going through each page and combining result)
 
### GraphQL wrapper
- [x] Google authorization
- [x] Get all projects
- [x] Get resource by ID
- [x] Get all resources
- [x] Get authorized resource
- [x] Get all time entry tags
- [x] Get time entry tag by ID
- [ ] Create time entry
  - [ ] Store time entry tags
- [ ] Update time entry 
  - [ ] Update time entry tags
- [ ] Refreshing tokens
- [ ] Using data loaders to optimize requests
- [ ] Cache responses from Teamdeck API
 

Resources:

- [Deployment to Heroku](https://dev.to/xinnks/deploy-a-rust-website-on-heroku-1l45)
